generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Edicao {
  idEdicao    String      @id @default(uuid())
  nomeEdicao  String
  dataComeco  String      @unique
  dataTermino String      @unique
  capa        String
  categorias  Categoria[]
  votantes    Votante[]
}

model Categoria {
  idCategoria   String    @id @default(uuid())
  nomeCategoria String    @unique
  createdAT     DateTime  @default(now())
  updatedAT     DateTime  @updatedAt
  edicoes       Edicao[]
  Artista       Artista[]
  Musica        Musica[]
}

model Usuario {
  idUsuario          String    @id @default(uuid())
  email              String    @unique
  senha              String
  role               String    @default("votante")
  genero             String?
  enderecoBlockchain String    @unique
  Artista            Artista[]
  Votante            Votante[]
}

model Noticias {
  idNoticia       String   @id @default(uuid())
  tituloDaNoticia String
  dataDaNoticia   String
  imagemDaNoticia String
  conteudo        String
  createdAT       DateTime @default(now())
  updatedAT       DateTime @updatedAt
}

model Artista {
  idArtista            String    @id @default(uuid())
  nomeArtistico        String    @unique
  telefone             Int       @unique
  participa            Boolean
  dataNascimento       String
  imagemPerfil         String
  nomeProvincia        String    @unique
  nomeMunicipio        String    @unique
  nomeDistrito         String    @unique
  nomeBairro           String    @unique
  nomeRua              String    @unique
  categoria            Categoria @relation(fields: [categoriaIdCategoria], references: [idCategoria])
  categoriaIdCategoria String
  musicas              Musica[]
  Usuario              Usuario?  @relation(fields: [usuarioIdUsuario], references: [idUsuario])
  usuarioIdUsuario     String?
}

model Musica {
  idMusica             String    @id @default(uuid())
  titulo               String
  link_musica          String
  ano_gravacao         Int
  generoMusica         String
  artistas             Artista[]
  categoria            Categoria @relation(fields: [categoriaIdCategoria], references: [idCategoria])
  categoriaIdCategoria String
}

model Votante {
  idVotante           String   @id @default(uuid())
  bilheteDeIdentidade String   @unique
  nomeProvincia       String   @unique
  nomeMunicipio       String   @unique
  nomeDistrito        String   @unique
  nomeBairro          String   @unique
  nomeRua             String   @unique
  usuario             Usuario  @relation(fields: [usuarioIdUsuario], references: [idUsuario])
  edicoes             Edicao[]
  usuarioIdUsuario    String
}
